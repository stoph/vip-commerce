{"version":3,"file":"index.js","mappings":"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","sources":["webpack://vip-commerce/./src/vip-commerce-block.js","webpack://vip-commerce/./src/vip-commerce-search-block.js","webpack://vip-commerce/external window \"React\"","webpack://vip-commerce/webpack/bootstrap","webpack://vip-commerce/webpack/runtime/compat get default export","webpack://vip-commerce/webpack/runtime/define property getters","webpack://vip-commerce/webpack/runtime/hasOwnProperty shorthand","webpack://vip-commerce/webpack/runtime/make namespace object","webpack://vip-commerce/./src/index.js"],"sourcesContent":["const { registerBlockType } = wp.blocks;\nconst { apiFetch } = wp;\nconst { useState, useEffect } = wp.element;\n\nregisterBlockType( 'vip-commerce/vip-commerce-block', {\n  title: 'VIP Commerce Block',\n  icon: 'smiley',\n  category: 'common',\n\n  edit: ( props ) => {\n    const [ products, setProducts ] = useState( [] );\n\n    useEffect( () => {\n      apiFetch( { path: '/vip-commerce/v1/products' } )\n        .then( data => {\n          setProducts( data.products );\n        } );\n    }, [] );\n\n    return (\n      <div style={ { display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gridGap: '1em' } }>\n        {products.map( ( product ) => (\n          <div key={ product.id } style={ { border: '1px solid #ccc', padding: '1em' } }>\n            <h2>{ product.name }</h2>\n            <div dangerouslySetInnerHTML={ { __html: product.description } }></div>\n            <p>${ parseFloat(product.price).toFixed(2) }</p>\n            <img src={ product.image } alt={ product.name } style={ { maxWidth: '30%' } } />\n          </div>\n        ) )}\n      </div>\n    );\n  },\n\n  save() {\n    return null;\n  },\n} );","const { registerBlockType } = wp.blocks;\nconst { apiFetch } = wp;\nconst { useState, useEffect } = wp.element;\nconst { TextControl, SelectControl, Button } = wp.components;\n\nconst { InnerBlocks } = wp.blockEditor;\nconst ALLOWED_BLOCKS = ['core/paragraph', 'core/heading'];\n\nconst { InspectorControls } = wp.blockEditor;\nconst { PanelBody } = wp.components;\n\nregisterBlockType( 'vip-commerce/vip-commerce-search-block', {\n  title: 'VIP Commerce Search Block',\n  icon: 'smiley',\n  category: 'common',\n  attributes: {\n    searchPhrase: {\n      type: 'string',\n      default: ''\n    },\n    selectedProduct: {\n      type: 'string',\n      default: ''\n    }\n  },\n\n  edit: ( props ) => {\n    const { attributes: { searchPhrase, selectedProduct }, setAttributes } = props;\n    const [ products, setProducts ] = useState( [] );\n\n    useEffect( () => {\n      if (searchPhrase) {\n        apiFetch( { path: `/vip-commerce/v1/products-by-name?search=${searchPhrase}` } )\n          .then( data => {\n            setProducts( data.products );\n          } );\n      }\n    }, [ searchPhrase ] );\n\n    const handleOnChange = ( value ) => {\n      setAttributes( { searchPhrase: value } );\n    };\n\n    const handleOnSelectProduct = ( productId ) => {\n      setAttributes( { selectedProduct: productId } );\n    };\n\n    const handleOnSelectButtonClick = () => {\n      if (products.length === 1) {\n        handleOnSelectProduct(products[0].id);\n      }\n    };\n\n    const selectedProductData = products.find( product => product.id === selectedProduct );\n\n    let productData = selectedProductData;\n    if (!productData) {\n      productData = {\n        name: 'Product Name',\n        description: 'Product Description',\n        price: '0.00',\n        image: 'https://via.placeholder.com/360x360'\n      };\n    }\n\n    return (\n      <>\n        <InspectorControls>\n          <PanelBody title=\"Product Search\">\n            <TextControl\n              label=\"Search Phrase\"\n              value={ searchPhrase }\n              onChange={ handleOnChange }\n            />\n            <SelectControl\n              label=\"Select a Product\"\n              value={ selectedProduct }\n              options={ products.map( product => ( { label: product.name, value: product.id } ) ) }\n              onChange={ handleOnSelectProduct }\n            />\n            <Button isPrimary onClick={ handleOnSelectButtonClick }>Select</Button>\n          </PanelBody>\n        </InspectorControls>\n        { productData && (\n          <div>\n            <h2>{ productData.name }</h2>\n            <p dangerouslySetInnerHTML={ { __html: productData.description } }></p>\n            <p>${ parseFloat(productData.price).toFixed(2) }</p>\n            <img src={ productData.image } alt={ productData.name } style={ { maxWidth: '30%' } } />\n          </div>\n        ) }\n        <InnerBlocks allowedBlocks={ ALLOWED_BLOCKS } />\n      </>\n    );\n  },\n\n  save: ( props ) => {\n    return ( <InnerBlocks.Content /> );\n  },\n} );","module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './vip-commerce-block';\nimport './vip-commerce-search-block';\n//import './vip-commerce-pattern.js';\n\n// Grrr\nconst nonProdBar = document.getElementById( 'vip-non-prod-bar' );\nif ( nonProdBar ) {\n  nonProdBar.remove();\n}\n"],"names":["registerBlockType","wp","blocks","apiFetch","useState","useEffect","element","title","icon","category","edit","props","products","setProducts","path","then","data","createElement","style","display","gridTemplateColumns","gridGap","map","product","key","id","border","padding","name","dangerouslySetInnerHTML","__html","description","parseFloat","price","toFixed","src","image","alt","maxWidth","save","TextControl","SelectControl","Button","components","InnerBlocks","blockEditor","ALLOWED_BLOCKS","InspectorControls","PanelBody","attributes","searchPhrase","type","default","selectedProduct","setAttributes","handleOnChange","value","handleOnSelectProduct","productId","handleOnSelectButtonClick","length","selectedProductData","find","productData","Fragment","label","onChange","options","isPrimary","onClick","allowedBlocks","Content","nonProdBar","document","getElementById","remove"],"sourceRoot":""}